## Map

### 跟踪局部地图环节

|              |                    |      |
| ------------ | ------------------ | ---- |
| mspKeyFrames | 地图中的关键帧对象 |      |
| mspMapPoints | 地图中的地图点对象 |      |
|              |                    |      |



## KeyFrame

### 通用数据

| 变量                                                     | 含义                                                         | 更新规则                                                     |
| -------------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| mvpMapPoints                                             | 储存该帧的地图点对象，索引对应特征点的索引，该特征点如果对应地图点，那么mvpMapPoints[i]的值就是地图点对象，反之为NULL。 | 每次跟踪过程，成功跟踪到的地图点就会注册到该变量中，都是经过特征匹配和优化过程筛选后的内点。 |
| mConnectedKeyFrameWeights<br />std::map<KeyFrame*,int>   | 存储着当前关键帧的共视关键帧及共视权重                       |                                                              |
| mvpOrderedConnectedKeyFrames<br />std::vector<KeyFrame*> | 存储与当关键帧的共视权重>15的关键帧信息，从大到小排序        |                                                              |
| mvOrderedWeights<br />std::vector< int >                 | 存储与当关键帧共视权重>15的关键帧的权重大小，从大到小排序    |                                                              |





## MapPoint



| 变量                                          | 含义                                                         | 更新规则                                                     |
| --------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| mObservations<br />std::map<KeyFrame*,size_t> | 表示地图点的观测关系，字典的键是对应的关键帧，值是表示这个地图点在该帧上面对应的特征点索引 | **初始化、创建关键帧时**通过AddObservation()函数添加键值对。<br />通过GetObservations()函数访问变量。 |
|                                               |                                                              |                                                              |
|                                               |                                                              |                                                              |



### 跟踪局部地图环节

| 变量                     | 含义                                                         | 更新规则 |
| ------------------------ | ------------------------------------------------------------ | -------- |
| mnTrackReferenceForFrame | 在更新局部地图点中，把当前局部关键帧的地图点作为局部地图点遍历时，为了防止重复作出的一个标记。 |          |
|                          |                                                              |          |
|                          |                                                              |          |

